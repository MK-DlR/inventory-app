<!-- views/search-results.ejs -->

<!DOCTYPE html>
<html lang="en">
    <%- include("./partials/head.ejs") %>
<body>
    <div class="search-results content">
        <h1><%= title %></h1>
        <%- include("./partials/filter.ejs") %>
        <%- include("./partials/sort.ejs") %>

        <!-- check if BOTH arrays are empty -->
        <% if (searchResults.plants.length === 0 && searchResults.medicinal_uses.length === 0) { %>
            <p>No results found for "<%= searchTerm %>".</p>
        <% } else { %>
            <!-- plants section -->
            <% if (searchResults.plants.length > 0) { %>
                <h2>Plants (<%= searchResults.plants.length%>)</h2>
                <ul id="plant-list">
                    <% searchResults.plants.forEach(plant => { %>
                        <li
                            data-common="<%= plant.common_name %>" 
                            data-scientific="<%= plant.scientific_name %>"
                            data-quantity="<%= quantityToSortValue(plant.quantity_level) %>"
                            data-created="<%= plant.created_at %>"
                            data-updated="<%= plant.updated_at %>">
                                <a href="/plants/<%= plant.id %>">
                                    <%= plant.common_name %> (<em><%= plant.scientific_name %></em>)
                                </a>
                        </li>
                    <% }) %>
                </ul>
            <% } %> 
            <!-- medicinal uses section -->
            <% if (searchResults.medicinal_uses.length > 0) { %>
                <h2>Medicinal Uses (<%= searchResults.medicinal_uses.length %>)</h2>
                <ul>
                    <% searchResults.medicinal_uses.forEach(use => { %>
                        <li>
                            <a href="/medicinal/<%= use.id %>">
                                <%= use.use_name %>
                            </a>
                        </li>
                    <% }) %>
                </ul>
            <% } %>
        <% } %>
    </div>

    <%- include("./partials/footer.ejs") %>
    <script src="/sort.js"></script>
</body>
</html>