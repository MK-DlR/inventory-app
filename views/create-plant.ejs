<!-- views/create-plant.ejs -->

<!DOCTYPE html>
<html lang="en">
    <%- include("./partials/head.ejs") %>
<body>
    <div class="create-plant content">
        <h1><%= title %></h1>

        <!-- Display validation errors -->
        <% if (locals.errors && errors.length > 0) { %>
            <div class="error-messages" style="color: red; background: #ffe6e6; padding: 1rem; margin-bottom: 1rem; border-radius: 4px;">
                <strong>Please fix the following errors:</strong>
                <ul>
                    <% errors.forEach(error => { %>
                        <li><%= error.msg %></li>
                    <% }) %>
                </ul>
            </div>
        <% } %>

        <form action="/plants/new" method="POST">
            <label for="scientific_name">Scientific Name: </label>
            <input 
                type="text" 
                name="scientific_name" 
                id="scientific_name" 
                value="<%= locals.formData?.scientific_name || '' %>"
                required>
            
            <label for="common_name">Common Name: </label>
            <input 
                type="text" 
                name="common_name" 
                id="common_name" 
                value="<%= locals.formData?.common_name || '' %>"
                required>
            
            <label for="stock_status">Stock Status: </label>
            <select name="stock_status" id="stock_status" required>
                <option value="in_stock" <%= locals.formData?.stock_status === 'in_stock' ? 'selected' : '' %>>In Stock</option>
                <option value="out_of_stock" <%= locals.formData?.stock_status === 'out_of_stock' ? 'selected' : '' %>>Out of Stock</option>
            </select>
            
            <label for="quantity_level">Quantity Level: </label>
            <select name="quantity_level" id="quantity_level">
                <option value="">-- Out of Stock --</option>
                <option value="high" <%= locals.formData?.quantity_level === 'high' ? 'selected' : '' %>>High</option>
                <option value="medium" <%= locals.formData?.quantity_level === 'medium' ? 'selected' : '' %>>Medium</option>
                <option value="low" <%= locals.formData?.quantity_level === 'low' ? 'selected' : '' %>>Low</option>
            </select>
            
            <label for="order_status">Order Status: </label>
            <select name="order_status" id="order_status">
                <option value="">-- No Order Status --</option>
                <option value="needs_ordering" <%= locals.formData?.order_status === 'needs_ordering' ? 'selected' : '' %>>Needs Ordering</option>
                <option value="on_order" <%= locals.formData?.order_status === 'on_order' ? 'selected' : '' %>>On Order</option>            
            </select>
            
            <label for="medicinal_uses">Medicinal Uses: </label>
            <!-- figure out how to populate select dropdown of existing medicinal uses in table -->
            <!-- adding/assigning new medicinal uses will be done on Add Medicinal Use page -->
            
            <button type="submit">Submit</button>
        </form>
        
    </div>
    <a href="/plants">All Plants</a><br>
    <a href="/medicinal">All Medicinal Uses</a>
</body>
</html>