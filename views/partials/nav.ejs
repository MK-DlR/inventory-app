<!-- views/partials/nav.ejs -->

<nav class="navbar">
    <div class="nav-container">
        <!-- logo with dropdown -->
        <div class="nav-logo">
            <button class="logo-button" id="logo-dropdown-btn">
                ðŸŒ¿
            </button>
            <div class="logo-dropdown" id="logo-dropdown">
                <a href="/plants" class="dropdown-link">Plants</a>
                <a href="/medicinal" class="dropdown-link">Medicinal Uses</a>
            </div>
        </div>

        <!-- nav links (desktop) -->
        <ul class="nav-links">      
            <li><a href="/plants" class="nav-link">Plants</a></li>
            <li><a href="/medicinal" class="nav-link">Medicinal Uses</a></li>
        </ul>

        <!-- search bar -->
        <div class="nav-search">
            <form action="/search" method="GET">
                <label for="search" class="search-label">Search</label>
                <div class="search-wrapper">
                    <div class="search-icon-wrapper">
                        <svg class="search-icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                        </svg>
                    </div>
                    <input type="text" id="search" name="search" placeholder="Search..." class="search-bar" required>
                </div>
            </form>
        </div>

        <!-- right side actions -->
        <div class="nav-actions">
            <a href="/plants/new" class="nav-button">
                <span>+</span>
                <span>Add Plant</span>
            </a>
            <a href="/medicinal/new" class="nav-button">
                <span>+</span>
                <span>Add Use</span>
            </a>
        </div>
    </div>
</nav>

<script>
    // logo dropdown toggle
    const logoBtn = document.getElementById('logo-dropdown-btn');
    const logoDropdown = document.getElementById('logo-dropdown');

    logoBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        logoDropdown.classList.toggle('show');
    });

    // close dropdown when clicking outside
    document.addEventListener('click', (e) => {
        if (!logoBtn.contains(e.target) && !logoDropdown.contains(e.target)) {
            logoDropdown.classList.remove('show');
        }
    });
</script>